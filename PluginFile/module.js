/* [create-plugin] version: 5.13.0 */
define(["@grafana/data","module","react"],((e,t,n)=>(()=>{"use strict";var i={781:t=>{t.exports=e},308:e=>{e.exports=t},959:e=>{e.exports=n}},r={};function o(e){var t=r[e];if(void 0!==t)return t.exports;var n=r[e]={exports:{}};return i[e](n,n.exports,o),n.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.p="public/plugins/monitorcloudops-convertify-panel/";var l={};o.r(l),o.d(l,{plugin:()=>g});var a=o(308),d=o.n(a);o.p=d()&&d().uri?d().uri.slice(0,d().uri.lastIndexOf("/")+1):"public/plugins/monitorcloudops-convertify-panel/";var p=o(781),s=o(959),c=o.n(s);function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){u(e,t,n[t])}))}return e}function b(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}const y=[{bit:0,name:"Status (Bit 0)",description:"1=Running, 0=Not Running"},{bit:1,name:"Stop (Bit 1)",description:"1=Stop, 0=Stop"},{bit:2,name:"Init. Standby (Bit 2)",description:"1=[SET], 0=[CLR]"},{bit:3,name:"Key Stop (Bit 3)",description:"1=[SET] Key Stop, 0=[CLR] Key Stop"},{bit:4,name:"Standby (Bit 4)",description:"1=SET, 0=CLR"},{bit:5,name:"Emergency Stop (Bit 5)",description:"1=SET, 0=CLR"},{bit:6,name:"Starting (Bit 6)",description:"1=True, 0=False"},{bit:7,name:"Stopping (Bit 7)",description:"1=TRUE, 0=FALSE"},{bit:9,name:"Fault Stop (Bit 9)",description:"1=High, 0=Low"},{bit:10,name:"Fault Stop (Bit 10)",description:"1=High, 0=Low"},{bit:11,name:"Derating Running (Bit 11)",description:"1=Running, 0=Not Running"},{bit:13,name:"IO-DSP Comm Abnormal (Bit 13)",description:"1=Abnormal, 0=Normal"},{bit:17,name:"Total Signal Bit of Running State (Bit 17)",description:"1=Set, 0=Clear"},{bit:18,name:"Total Stop Bit (Bit 18)",description:"1=Set, 0=Clear"},{bit:19,name:"Anti-PID Running (Bit 19)",description:"1=Running, 0=Not Running"},{bit:20,name:"Anti-PID Running (Bit 20)",description:"1=Running, 0=Not Running"}],g=new p.PanelPlugin((({data:e,options:t,width:n,height:i})=>{const[r,o]=(0,s.useState)(1),[l,a]=(0,s.useState)({}),d=(e,t=32)=>e.toString(2).padStart(t,"0"),p=e=>"0x"+e.toString(16).toUpperCase(),u=e.series[0],g=null==u?void 0:u.fields.find((e=>"time"===e.type)),f=(null==u?void 0:u.fields.find((e=>e.name===t.selectedField)))||(null==u?void 0:u.fields.find((e=>"number"===e.type)));if(!(e&&e.series&&0!==e.series.length&&g&&f))return c().createElement("div",{style:{width:n,height:i,padding:"10px",fontFamily:"Arial, sans-serif"}},c().createElement("div",null,"No data"));const x=Array.from(g.values),v=Array.from(f.values),S=x.map(((e,n)=>{const i=v[n],r=d(i),o=y.reduce(((e,t)=>(e[t.name]=r[r.length-1-t.bit]||"0",e)),{});return m({timestamp:e,value:i,binary:"binary"===t.conversionType||"all"===t.conversionType?d(i):void 0,hex:"hexadecimal"===t.conversionType||"all"===t.conversionType?p(i):void 0},o)})),h=(e=>0===Object.keys(l).length?e:e.filter((e=>Object.keys(l).every((t=>{var n;const i=l[t];return!i||"All"===i||(null===(n=e[t])||void 0===n?void 0:n.toString())===i})))))(S.slice(10*(r-1),10*r)),O=e=>{o(e)};return c().createElement("div",{style:{width:n,height:i,overflow:"auto",padding:"5px",fontFamily:"Arial, sans-serif"}},c().createElement("table",{style:{width:"100%",borderCollapse:"collapse",textAlign:"left",fontFamily:"Arial, sans-serif",border:"1px solid #ddd"}},c().createElement("thead",null,c().createElement("tr",null,c().createElement("th",{style:{padding:"5px",backgroundColor:"#0056b3",color:"#fff",fontSize:"12px",minWidth:"160px"}},"Timestamp"),c().createElement("th",{style:{padding:"5px",backgroundColor:"#0056b3",color:"#fff",fontSize:"12px"}},"Value"),"binary"===t.conversionType||"all"===t.conversionType?c().createElement("th",{style:{padding:"5px",backgroundColor:"#0056b3",color:"#fff",fontSize:"12px"}},"Binary"):null,"hexadecimal"===t.conversionType||"all"===t.conversionType?c().createElement("th",{style:{padding:"5px",backgroundColor:"#0056b3",color:"#fff",fontSize:"12px"}},"Hex"):null,t.showConstantColumns&&y.map((e=>{return c().createElement("th",{key:e.bit,style:{padding:"6px",backgroundColor:"#0056b3",color:"#fff",fontSize:"10px",position:"relative",minWidth:"150px",textAlign:"center"}},e.name,c().createElement("select",{onChange:t=>{return n=e.name,i=t.target.value,void a((e=>b(m({},e),{[n]:i})));var n,i},style:{marginTop:"4px",width:"90%",padding:"4px",border:"1px solid #ccc",borderRadius:"4px",fontSize:"10px"}},c().createElement("option",{value:"All"},"All"),(t=e.name,[...new Set(S.map((e=>e[t])))]).map((e=>c().createElement("option",{key:e,value:e},e)))));var t})))),c().createElement("tbody",null,h.map(((e,n)=>c().createElement("tr",{key:n,style:{borderBottom:"1px solid #ddd"}},c().createElement("td",{style:{padding:"6px",border:"1px solid #ddd"}},new Date(e.timestamp).toLocaleString()),c().createElement("td",{style:{padding:"6px",border:"1px solid #ddd"}},e.value),e.binary?c().createElement("td",{style:{padding:"6px",border:"1px solid #ddd"}},e.binary):null,e.hex?c().createElement("td",{style:{padding:"6px",border:"1px solid #ddd"}},e.hex):null,t.showConstantColumns&&y.map((t=>c().createElement("td",{key:t.bit,style:{padding:"6px",border:"1px solid #ddd",minWidth:"150px",textAlign:"center"}},e[t.name])))))))),c().createElement("div",{style:{marginTop:"5px",textAlign:"center"}},c().createElement("button",{onClick:()=>O(r-1),disabled:1===r,style:{margin:"5px",padding:"5px 8px",backgroundColor:"#0056b3",color:"#fff",border:"none"}},"Previous"),c().createElement("button",{onClick:()=>O(r+1),disabled:r===Math.ceil(S.length/10),style:{margin:"5px",padding:"4px 6px",backgroundColor:"#0056b3",color:"#fff",border:"none"}},"Next")))})).setPanelOptions((e=>e.addRadio({path:"conversionType",name:"Conversion Type",description:"Select the conversion type for table values",defaultValue:"binary",settings:{options:[{value:"binary",label:"Binary"},{value:"hexadecimal",label:"Hexadecimal"},{value:"all",label:"All"}]}}).addBooleanSwitch({path:"showConstantColumns",name:"Show Constant Columns",description:"Toggle to show or hide constant columns",defaultValue:!0})));return l})()));
//# sourceMappingURL=module.js.map